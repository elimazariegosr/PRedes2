version: "3.1"
services:
  balancer:
    build: ./Balancer
    restart: always
    ports:
      - "5005:5005"
    networks:
      service_network:
        ipv4_address: 172.35.71.6  
  server1:
    build: ./Server1
    restart: always
    ports:
      - "5006:5006"
    networks:
      service_network:
        ipv4_address: 172.35.71.7 
  server2:
    build: ./Server2
    restart: always
    ports:
      - "5007:5007"
    networks:
      service_network:
        ipv4_address: 172.35.71.8
  server3:
    build: ./Server3
    restart: always
    ports:
      - "5008:5008"
    networks:
      db_network:
        ipv4_address: 10.10.11.3
networks:
  service_network:
    ipam:
      config:
        - subnet: 172.35.71.0/24
    external: true    
  db_network:
    ipam:
      config:
        - subnet: 10.10.11.0/24        
    external: true    
